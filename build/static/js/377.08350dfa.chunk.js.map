{"version":3,"file":"static/js/377.08350dfa.chunk.js","mappings":"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","sources":["customApp/CustomHook/useKey.js","customApp/containers/DanhMuc/DMPhongBan/styled.js","customApp/containers/DanhMuc/DMPhongBan/modalAddEdit.js","customApp/containers/DanhMuc/DMPhongBan/index.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\n\r\nfunction useKey(props) {\r\n  const [modalKey, setModalKey] = useState(0);\r\n  const increaseKey = () => {\r\n    setModalKey(modalKey + 1);\r\n  };\r\n  return [modalKey, increaseKey];\r\n}\r\n\r\nexport {useKey};","import styled from 'styled-components';\r\n\r\nexport const TreeCustom = styled.div`\r\n    .tree-custom {\r\n        padding: 0;\r\n        border: none;\r\n    }\r\n    .isoBoxWrapper {\r\n        border: none;\r\n        padding: 0;\r\n    }\r\n    .tree-custom div,\r\n    .isoLayoutContentWrapper,\r\n    .isoLayoutContentWrapper div {\r\n        padding: 0;\r\n    }\r\n\r\n    h1,\r\n    .d-none {\r\n        display: none;\r\n        padding: 0 !important;\r\n    }\r\n    .mg-top::-webkit-scrollbar {\r\n        background-color: #f5f5f5;\r\n    }\r\n\r\n    .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\r\n        width: 30% !important;\r\n    }\r\n    span.ant-input-group-wrapper.ant-input-search {\r\n        width: 65% !important;\r\n    }\r\n\r\n    span.ant-tree-title {\r\n        min-width: 450px;\r\n    }\r\n\r\n    .mg-top {\r\n        margin-top: 20px;\r\n        height: calc(100vh - 265px);\r\n        overflow: scroll;\r\n    }\r\n\r\n    @media (max-width: 767px) {\r\n        span.ant-tree-title {\r\n            width: 100%;\r\n        }\r\n        .isoBoxWrapper {\r\n            height: 300px !important;\r\n        }\r\n        .mg-top {\r\n            height: 300px !important;\r\n        }\r\n        .esmvo {\r\n            height: 300px;\r\n        }\r\n    }\r\n    @media (min-width: 768px) and (max-width: 852px) {\r\n        .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\r\n            width: 100% !important;\r\n        }\r\n        span.ant-input-group-wrapper.ant-input-search {\r\n            width: 100% !important;\r\n        }\r\n    }\r\n`;\r\n\r\nexport const InputCustom = styled.div`\r\n    .ant-input-number-handler-wrap {\r\n        display: none;\r\n        width: 100%;\r\n    }\r\n    .ant-input-number.ant-input-number-in-form-item {\r\n        width: 100%;\r\n    }\r\n`;\r\n\r\nexport const HeaderCQ = styled.div`\r\n    height: 40px;\r\n    line-height: 40px;\r\n    font-weight: 500;\r\n    font-size: 17px;\r\n    margin: 5px 0;\r\n`;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { ITEM_LAYOUT, ITEM_LAYOUT_SMALL_2, REQUIRED, ITEM_LAYOUT_HALF } from '../../../../settings/constants';\r\nimport { Form, InputNumber, Radio } from 'antd';\r\nimport { Button, Modal, Input, Select, Option } from '../../../../components/uielements/exportComponent';\r\nimport Inputnumber from '../../../../components/uielements/InputNumber';\r\n// import InputNumber from '../../../../helpers/utility';\r\nimport TextArea from 'antd/lib/input/TextArea';\r\nimport { InputCustom } from './styled';\r\n\r\nconst { Item, useForm } = Form;\r\n\r\nexport default (props) => {\r\n    const [form] = useForm();\r\n    const { dataEdit, loading, visible, action, IDmodal, CoQuanDonVi } = props;\r\n    const [isFormSuccess, setIsFormSuccess] = useState(true);\r\n\r\n    const [value1, setValue1] = useState();\r\n    useEffect(() => {\r\n        console.log(dataEdit);\r\n        if (dataEdit) {\r\n            form &&\r\n                form.setFieldsValue({\r\n                    ...dataEdit,\r\n                    CoQuanDonVi: CoQuanDonVi,\r\n                });\r\n        }\r\n    }, []);\r\n    form.setFieldsValue({\r\n        CoQuanID: IDmodal,\r\n    });\r\n    const onChange1 = (e) => {\r\n        setValue1(e.target.value);\r\n    };\r\n    const onOk = async (e) => {\r\n        e.preventDefault();\r\n        const value = await form.validateFields();\r\n        props.onCreate(value);\r\n    };\r\n\r\n    const handleChangedFields = async (changedValues, allValues) => {\r\n        // const {TenQuocTich,MaQuocTich}\r\n        // console.log('changed')\r\n        const value = await form.getFieldsValue();\r\n        const { SoDienThoai, TenPhongBan, GhiChu } = value;\r\n        if (TenPhongBan && (TenPhongBan !== dataEdit.TenPhongBan || GhiChu !== dataEdit.GhiChu || SoDienThoai !== dataEdit.SoDienThoai)) {\r\n            setIsFormSuccess(false);\r\n        } else {\r\n            setIsFormSuccess(true);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal\r\n            title={`${action === 'edit' ? 'Sửa' : 'Thêm'} thông tin phòng ban`}\r\n            width={450}\r\n            visible={visible}\r\n            onCancel={props.onCancel}\r\n            footer={[\r\n                <Button key=\"back\" onClick={props.onCancel}>\r\n                    Hủy\r\n                </Button>,\r\n                <Button\r\n                    disabled={isFormSuccess}\r\n                    key=\"submit\"\r\n                    htmlType=\"submit\"\r\n                    type=\"primary\"\r\n                    form=\"formmonhoc\"\r\n                    loading={loading}\r\n                    onClick={onOk}\r\n                >\r\n                    Lưu\r\n                </Button>,\r\n            ]}\r\n        >\r\n            <Form form={form} name={'formphongban'} onChange={handleChangedFields}>\r\n                {action === 'edit' ? <Item name={'PhongBanID'} hidden /> : ''}\r\n                {action === 'edit' ? (\r\n                    <Item name={'CoQuanID'} hidden />\r\n                ) : (\r\n                    <Item label=\"Cơ Quan ID\" name={'CoQuanID'} {...ITEM_LAYOUT} hidden>\r\n                        <Input />\r\n                    </Item>\r\n                )}\r\n                <Item label=\"Cơ quan đơn vị\" name={'CoQuanDonVi'} {...ITEM_LAYOUT} required={[REQUIRED]}>\r\n                    <Input disabled />\r\n                </Item>\r\n                <Item label=\"Tên phòng ban\" name={'TenPhongBan'} {...ITEM_LAYOUT} required={[REQUIRED]}>\r\n                    <Input />\r\n                </Item>\r\n                <Item\r\n                    label=\"Điện thoại\"\r\n                    name={'SoDienThoai'}\r\n                    {...ITEM_LAYOUT}\r\n                    rules={[{ max: 11, message: 'Số điện thoại không hợp lệ.', pattern: new RegExp(/^[0-9]+$/) }]}\r\n                >\r\n                    <Input maxLength={11} />\r\n                </Item>\r\n                <Item label=\"Ghi chú\" name={'GhiChu'} {...ITEM_LAYOUT}>\r\n                    <TextArea />\r\n                </Item>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n};\r\n","import { Modal, Table, Tooltip, message, Checkbox, Row, Col, Tree } from 'antd';\r\nimport actions from '../../../redux/DanhMuc/DMPhongBan/actions';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport LayoutWrapper from '../../../../components/utility/layoutWrapper';\r\nimport PageHeader from '../../../../components/utility/pageHeader';\r\nimport PageAction from '../../../../components/utility/pageAction';\r\nimport Box from '../../../../components/utility/box';\r\nimport BoxFilter from '../../../../components/utility/boxFilter';\r\nimport BoxTable from '../../../../components/utility/boxTable';\r\nimport { Button, InputSearch, Option, Select } from '../../../../components/uielements/exportComponent';\r\nimport {\r\n    changeUrlFilter,\r\n    exportExcel,\r\n    formatDataTreeKhieuTo,\r\n    getDefaultPageSize,\r\n    getFilterData,\r\n    getRoleByKey,\r\n} from '../../../../helpers/utility';\r\nimport { useKey } from '../../../CustomHook/useKey';\r\nimport queryString from 'query-string';\r\nimport api from './config';\r\nimport constantCoQuan from '../../../redux/DanhMuc/DMCoQuan/actions';\r\nimport moment from 'moment';\r\nimport ModalAddEdit from './modalAddEdit';\r\nimport { DeleteOutlined, EditOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport { useSelector } from 'react-redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport { HeaderCQ, TreeCustom } from './styled';\r\nimport DMCoQuan from '../DMCoQuan';\r\n\r\nconst DMPhongBan = (props) => {\r\n    document.title = 'Danh Mục Phòng Ban';\r\n    const [filterData, setFilterData] = useState(queryString.parse(props.location.search));\r\n    const [dataModalAddEdit, setDataModalAddEdit] = useState({});\r\n    const [visibleModalAddEdit, setVisibleModalAddEdit] = useState(false);\r\n    const [action, setAction] = useState('');\r\n    const [modalKey, inceaseModalKey] = useKey();\r\n    const [selectedRowsKey, setSelectedRowsKey] = useState([]);\r\n    const [confirmLoading, setConfirmLoading] = useState(false);\r\n    const [parent, setParent] = useState('');\r\n    const DanhSachCoQuan = useSelector((state) => state.DMCoQuan.DanhSachCoQuan);\r\n\r\n    useEffect(() => {\r\n        changeUrlFilter(filterData);\r\n        props.getList(filterData);\r\n    }, [filterData]);\r\n\r\n    useEffect(() => {\r\n        props.getList(filterData);\r\n    }, []);\r\n\r\n    const onTableChange = (pagination, filters, sorter) => {\r\n        let oldFilterData = filterData;\r\n        let onOrder = { pagination, filters, sorter };\r\n        let newFilterData = getFilterData(oldFilterData, null, onOrder);\r\n\r\n        setFilterData(newFilterData);\r\n        setSelectedRowsKey([]);\r\n    };\r\n\r\n    const findParentFromTree = (list, ParentID) => {\r\n        list.forEach((item) => {\r\n            if (item.Children) {\r\n                if (item.ID === ParentID) {\r\n                    setParent(item);\r\n                } else {\r\n                    findParentFromTree(item.Children, ParentID);\r\n                }\r\n            } else {\r\n                if (item.ID === ParentID) {\r\n                    setParent(item);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    const onFilter = (value, property) => {\r\n        let oldFilterData = filterData;\r\n        let onFilter = { value, property };\r\n        let newfilterData = getFilterData(oldFilterData, onFilter, null);\r\n        //get filter data\r\n        setFilterData(newfilterData);\r\n        setSelectedRowsKey([]);\r\n\r\n        findParentFromTree(DanhSachCoQuan, value);\r\n    };\r\n    useEffect(() => {\r\n        findParentFromTree(DanhSachCoQuan, parseInt(filterData.CoQuanID));\r\n    }, [DanhSachCoQuan]);\r\n    const showModalAdd = () => {\r\n        if (filterData.CoQuanID) {\r\n            setAction('add');\r\n            setDataModalAddEdit({ props });\r\n            inceaseModalKey();\r\n            setVisibleModalAddEdit(true);\r\n        } else {\r\n            message.error('Chưa chọn cơ quan đơn vị.');\r\n        }\r\n    };\r\n\r\n    const deleteModalAddEdit = (PhongBanID) => {\r\n        Modal.confirm({\r\n            title: 'Xóa Dữ Liệu',\r\n            content: 'Bạn có muốn xóa phòng ban này không?',\r\n            cancelText: 'Không',\r\n            okText: 'Có',\r\n            onOk: () => {\r\n                setConfirmLoading(true);\r\n                api.XoaPhongBan(PhongBanID)\r\n                    .then((res) => {\r\n                        if (res.data.Status > 0) {\r\n                            setConfirmLoading(false);\r\n                            props.getList({\r\n                                ...filterData,\r\n                                PageNumber:\r\n                                    Math.ceil((TotalRow - 1) / filterData.PageSize) < filterData.PageNumber\r\n                                        ? Math.ceil((TotalRow - 1) / filterData.PageSize)\r\n                                        : filterData.PageNumber,\r\n                            });\r\n                            message.destroy();\r\n                            message.success(res.data.Message);\r\n                            setFilterData({\r\n                                ...filterData,\r\n                                PageNumber:\r\n                                    Math.ceil((TotalRow - 1) / filterData.PageSize) < filterData.PageNumber\r\n                                        ? Math.ceil((TotalRow - 1) / filterData.PageSize)\r\n                                        : filterData.PageNumber,\r\n                            });\r\n                        } else {\r\n                            message.destroy();\r\n                            message.error(res.data.Message);\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        message.destroy();\r\n                        message.error(error.toString());\r\n                    });\r\n            },\r\n        });\r\n    };\r\n\r\n    const showModalEdit = (id) => {\r\n        const PhongBanID = id;\r\n        setAction('edit');\r\n        api.ChiTietPhongBan({ PhongBanID })\r\n            .then((res) => {\r\n                if (res.data.Status > 0) {\r\n                    setDataModalAddEdit(res.data.Data);\r\n                    inceaseModalKey();\r\n                    setVisibleModalAddEdit(true);\r\n                } else {\r\n                    message.destroy();\r\n                    message.error(res.data.Message);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                message.destroy();\r\n                message.error(error.toString());\r\n            });\r\n    };\r\n\r\n    const hideModalAddEdit = () => {\r\n        setAction('');\r\n        setSelectedRowsKey([]);\r\n        setDataModalAddEdit({});\r\n        setVisibleModalAddEdit(false);\r\n    };\r\n\r\n    const submitModalAddEdit = (data) => {\r\n        setConfirmLoading(true);\r\n        if (action === 'add') {\r\n            api.ThemPhongBan(data)\r\n                .then((res) => {\r\n                    setConfirmLoading(false);\r\n                    if (res.data.Status > 0) {\r\n                        message.destroy();\r\n                        message.success(res.data.Message);\r\n                        onFilter(filterData.CoQuanID, 'CoQuanID');\r\n                        hideModalAddEdit();\r\n                    } else {\r\n                        setConfirmLoading(false);\r\n                        message.destroy();\r\n                        message.error(res.data.Message);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    setConfirmLoading(false);\r\n                    message.destroy();\r\n                    message.error(error.toString());\r\n                });\r\n        }\r\n        if (action === 'edit') {\r\n            api.CapNhatPhongBan(data)\r\n                .then((res) => {\r\n                    if (res.data.Status > 0) {\r\n                        setConfirmLoading(false);\r\n                        message.destroy();\r\n                        message.success(res.data.Message);\r\n                        hideModalAddEdit();\r\n                        props.getList(filterData);\r\n                    } else {\r\n                        setConfirmLoading(false);\r\n                        message.destroy();\r\n                        message.error(res.data.Message);\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    setConfirmLoading(false);\r\n                    message.destroy();\r\n                    message.error(error.toString());\r\n                });\r\n        }\r\n    };\r\n\r\n    const renderThaoTac = (record) => {\r\n        return (\r\n            <div className={'action-btn'}>\r\n                {/* {role.edit ? */}\r\n                <Tooltip title={'Sửa'}>\r\n                    <EditOutlined onClick={() => showModalEdit(record.PhongBanID)} />\r\n                </Tooltip>\r\n                {/* : \"\"} */}\r\n                {/* {role.delete ? */}\r\n                <Tooltip title={'Xóa'}>\r\n                    <DeleteOutlined onClick={() => deleteModalAddEdit(record.PhongBanID)} />\r\n                </Tooltip>\r\n                {/* : \"\"} */}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const { DanhSachPhongBan, TotalRow, role } = props;\r\n    const PageNumber = filterData.PageNumber ? parseInt(filterData.PageNumber) : 1;\r\n    const PageSize = filterData.PageSize ? parseInt(filterData.PageSize) : getDefaultPageSize();\r\n\r\n    const columns = [\r\n        {\r\n            title: 'STT',\r\n            width: '5%',\r\n            align: 'center',\r\n            render: (text, record, index) => <span>{(PageNumber - 1) * PageSize + (index + 1)}</span>,\r\n        },\r\n        {\r\n            title: 'Tên Phòng Ban',\r\n            dataIndex: 'TenPhongBan',\r\n            align: 'left',\r\n            width: 30,\r\n        },\r\n        {\r\n            title: 'Số Điện Thoại',\r\n            dataIndex: 'SoDienThoai',\r\n            align: 'left',\r\n            width: 15,\r\n        },\r\n        {\r\n            title: 'Ghi Chú',\r\n            dataIndex: 'GhiChu',\r\n            align: 'left',\r\n            width: 30,\r\n        },\r\n        {\r\n            title: 'Thao tác',\r\n            width: '15%',\r\n            align: 'center',\r\n            render: (text, record) => renderThaoTac(record),\r\n        },\r\n    ];\r\n    const getData = (ID) => {\r\n        onFilter(ID, 'CoQuanID');\r\n    };\r\n\r\n    return (\r\n        <LayoutWrapper>\r\n            <PageHeader>Danh Mục Phòng Ban</PageHeader>\r\n            <PageAction>\r\n                <Button type=\"primary\" onClick={showModalAdd} disabled={filterData.CoQuanID ? false : true}>\r\n                    <PlusOutlined />\r\n                    Thêm mới\r\n                </Button>\r\n            </PageAction>\r\n            <Box>\r\n                <Row gutter={[40, 0]}>\r\n                    <Col xl={7} md={7} xs={24}>\r\n                        <BoxFilter></BoxFilter>\r\n                        {/* <Tree showLine treeData={formatDataTreeKhieuTo(dataCoQuan)} height={height} /> */}\r\n                        <TreeCustom>\r\n                            <DMCoQuan dispatch={getData} {...props} styled={parseInt(filterData.CoQuanID)} />\r\n                        </TreeCustom>\r\n                    </Col>\r\n                    <Col xl={17} md={17} xs={24}>\r\n                        <HeaderCQ> {parent.Ten ? `Danh sách các phòng ban thuộc ${parent.Ten}` : ''}</HeaderCQ>\r\n                        <BoxTable\r\n                            columns={columns}\r\n                            dataSource={DanhSachPhongBan}\r\n                            onChange={onTableChange}\r\n                            pagination={{\r\n                                showSizeChanger: true,\r\n                                showTotal: (total, range) => `Từ ${range[0]} đến ${range[1]} trên ${total} kết quả`,\r\n                                total: TotalRow,\r\n                                current: PageNumber,\r\n                                pageSize: PageSize,\r\n                            }}\r\n                            rowKey={(record) => record.PhongBanID}\r\n                        />\r\n                    </Col>\r\n                </Row>\r\n            </Box>\r\n            <ModalAddEdit\r\n                visible={visibleModalAddEdit}\r\n                dataEdit={dataModalAddEdit}\r\n                action={action}\r\n                loading={confirmLoading}\r\n                key={modalKey}\r\n                onCreate={submitModalAddEdit}\r\n                onCancel={hideModalAddEdit}\r\n                DanhSachPhongBan={DanhSachPhongBan}\r\n                IDmodal={filterData.CoQuanID}\r\n                CoQuanDonVi={parent.Ten}\r\n            />\r\n        </LayoutWrapper>\r\n    );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        ...state.DanhMucPhongBan,\r\n        role: getRoleByKey(state.Auth.role),\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, actions)(DMPhongBan);\r\n"],"names":["useKey","props","useState","modalKey","setModalKey","TreeCustom","styled","HeaderCQ","Item","Form","useForm","form","dataEdit","loading","visible","action","IDmodal","CoQuanDonVi","isFormSuccess","setIsFormSuccess","useEffect","console","log","setFieldsValue","CoQuanID","onOk","e","preventDefault","validateFields","value","onCreate","handleChangedFields","changedValues","allValues","getFieldsValue","SoDienThoai","TenPhongBan","GhiChu","title","width","onCancel","footer","onClick","disabled","htmlType","type","name","onChange","hidden","label","ITEM_LAYOUT","required","REQUIRED","rules","max","message","pattern","RegExp","maxLength","TextArea","connect","state","DanhMucPhongBan","role","getRoleByKey","Auth","actions","document","queryString","location","search","filterData","setFilterData","dataModalAddEdit","setDataModalAddEdit","visibleModalAddEdit","setVisibleModalAddEdit","setAction","inceaseModalKey","setSelectedRowsKey","confirmLoading","setConfirmLoading","parent","setParent","DanhSachCoQuan","useSelector","DMCoQuan","changeUrlFilter","getList","findParentFromTree","list","ParentID","forEach","item","Children","ID","onFilter","property","oldFilterData","newfilterData","getFilterData","parseInt","hideModalAddEdit","renderThaoTac","record","className","EditOutlined","id","PhongBanID","api","then","res","data","Status","Data","Message","catch","error","toString","showModalEdit","DeleteOutlined","Modal","content","cancelText","okText","PageNumber","Math","ceil","TotalRow","PageSize","DanhSachPhongBan","getDefaultPageSize","columns","align","render","text","index","dataIndex","PlusOutlined","gutter","xl","md","xs","dispatch","Ten","dataSource","pagination","filters","sorter","onOrder","newFilterData","showSizeChanger","showTotal","total","range","current","pageSize","rowKey"],"sourceRoot":""}