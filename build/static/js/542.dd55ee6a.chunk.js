"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[542],{77542:function(t,e,a){a.r(e),a.d(e,{default:function(){return B}});var n=a(18489),i=a(27853),r=a(84531),o=a(78932),l=a(66621),c=a(72791),h=a(47375),u=a(52591),s=a(36043),d=a(35667),f=a(7111),g=a(66914),S=a(49389),p=a(77027),T=a(57652),_=a(66106),L=a(30914),E=a(28532),v=a(55454),U={SAOLUU_GET_INIT_DATA_REQUEST:"SAOLUU_GET_INIT_DATA_REQUEST",SAOLUU_GET_INIT_DATA_REQUEST_SUCCESS:"SAOLUU_GET_INIT_DATA_REQUEST_SUCCESS",SAOLUU_GET_INIT_DATA_REQUEST_ERROR:"SAOLUU_GET_INIT_DATA_REQUEST_ERROR",getInitData:function(t){return function(e,a){var n=a().Auth.role,i=(0,v.Ry)(n,"quan-ly-can-bo");e({type:U.SAOLUU_GET_INIT_DATA_REQUEST,payload:{filterData:t,role:i}})}},SAOLUU_GET_LIST_REQUEST:"SAOLUU_GET_LIST_REQUEST",SAOLUU_GET_LIST_REQUEST_SUCCESS:"SAOLUU_GET_LIST_REQUEST_SUCCESS",SAOLUU_GET_LIST_REQUEST_ERROR:"SAOLUU_GET_LIST_REQUEST_ERROR",getList:function(t){return{type:U.SAOLUU_GET_LIST_REQUEST,payload:{filter:t}}},getNotifications:function(){return{type:"GET_NOTIFICATION_REQUEST_TO_APP_SAGA"}}},Z=U,m=a(29396),C=a(53469),x={danhsachnhatky:C.ZP.apiTemp+"SystemLog/GetPagingByQuanTriDuLieu",danhsachfilephuchoi:C.ZP.apiTemp+"QuanTriDuLieu/GetFileInDerectory",saoluu:C.ZP.apiTemp+"QuanTriDuLieu/BackupDatabase",phuchoi:C.ZP.apiTemp+"QuanTriDuLieu/RestoreDatabase"},y={getUnit:function(t){return(0,m.Nr)(x.danhsachnhatky,(0,n.Z)((0,n.Z)({},t),{},{PageNumber:t.PageNumber?t.PageNumber:1,PageSize:t.PageSize?t.PageSize:(0,v.hL)()}))},getFilePhucHoi:function(){return(0,m.Nr)(x.danhsachfilephuchoi)},saoLuu:function(t){return(0,m.Nr)(x.saoluu,(0,n.Z)({},t))},phucHoi:function(t){return(0,m.Nr)(x.phuchoi,(0,n.Z)({},t))}},D=a(4245),P=a(70297),N=a(72426),I=a.n(N),A=a(88428),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},k=a(54963),b=function(t,e){return c.createElement(k.Z,(0,A.Z)((0,A.Z)({},t),{},{ref:e,icon:R}))};b.displayName="CloudUploadOutlined";var w=c.forwardRef(b),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},O=function(t,e){return c.createElement(k.Z,(0,A.Z)((0,A.Z)({},t),{},{ref:e,icon:j}))};O.displayName="CloudDownloadOutlined";var H=c.forwardRef(O),Q=a(80184),F=S.Z.Search,G=function(t){(0,o.Z)(a,t);var e=(0,l.Z)(a);function a(t){var n;(0,i.Z)(this,a),(n=e.call(this,t)).onSearch=function(t,e){var a=n.state.filterData,i={value:t,property:e},r=(0,v.mB)(a,i,null);n.setState({filterData:r},(function(){(0,v.ZZ)(n.state.filterData),n.props.getList(n.state.filterData)}))},n.onTableChange=function(t,e,a){var i=n.state.filterData,r={pagination:t,filters:e,sorter:a},o=(0,v.mB)(i,null,r);n.setState({filterData:o},(function(){(0,v.ZZ)(n.state.filterData),n.props.getList(n.state.filterData)}))},n.catChuoi=function(t){t.target.value.trim().replace(/ +/g," ");var e=t.charCode;(32===e&&" "===t.target.value[t.target.value.length-1]||32===e&&0===t.target.value.length)&&t.preventDefault(),92!==e&&47!==e&&58!==e&&42!==e&&63!==e&&34!==e&&60!==e&&62!==e&&124!==e||(t.preventDefault(),p.ZP.warn('T\xean file kh\xf4ng \u0111\u01b0\u1ee3c ch\u1ee9a k\xed t\u1ef1 \u0111\u1eb7c bi\u1ec7t ( / : * ? " < > |)')),50===n.state.tenFileSave.length&&p.ZP.warn("T\xean file ch\u1ec9 ch\u1ee9a t\u1ed1i \u0111a 50 k\xfd t\u1ef1")},n.changeTenFile=function(t){n.setState({tenFileSave:t.target.value})},n.saoLuu=function(){var t=n.state.tenFileSave.trim();""===t?T.Z.error({title:"L\u1ed7i",content:"Ch\u01b0a nh\u1eadp t\xean file sao l\u01b0u",okText:"Quay l\u1ea1i"}):T.Z.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n sao l\u01b0u d\u1eef li\u1ec7u hi\u1ec7n t\u1ea1i kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:function(){var e={fileName:t};n.setState({loading:!0}),y.saoLuu(e).then((function(t){n.setState({loading:!1}),t.data.Status>0?(p.ZP.success(t.data.Message),n.props.getList(n.state.filterData),n.props.getNotifications(),n.setState({tenFileSave:""})):(n.setState({loading:!1}),T.Z.error({title:"L\u1ed7i",content:t.data.Message}))})).catch((function(t){n.setState({loading:!1}),T.Z.error({title:"L\u1ed7i",content:"L\u1ed7i h\u1ec7 th\u1ed1ng"})}))}})},n.phucHoi=function(){var t=n.state.filePhucHoi;void 0===t?T.Z.error({title:"L\u1ed7i",content:"Ch\u01b0a ch\u1ecdn file ph\u1ee5c h\u1ed3i",okText:"Quay l\u1ea1i"}):T.Z.confirm({title:"Th\xf4ng b\xe1o",content:"B\u1ea1n c\xf3 mu\u1ed1n ph\u1ee5c h\u1ed3i d\u1eef li\u1ec7u n\xe0y kh\xf4ng ?",okText:"C\xf3",cancelText:"Kh\xf4ng",onOk:function(){n.setState({loading:!0});var e={fileName:t};y.phucHoi(e).then((function(t){n.setState({loading:!1}),t.data.Status>0?(p.ZP.success(t.data.Message),n.setState({filePhucHoi:void 0}),n.props.getList(n.state.filterData),n.props.getNotifications()):(n.setState({loading:!1}),T.Z.error({title:"L\u1ed7i",content:t.data.Message}))})).catch((function(t){n.setState({loading:!1}),T.Z.error({title:"L\u1ed7i",content:"L\u1ed7i h\u1ec7 th\u1ed1ng"})}))}})},n.changeFilePhucHoi=function(t){n.setState({filePhucHoi:t})},n.changeFilterByName=function(t){n.setState({filterByName:t.target.value})},document.title="Sao l\u01b0u, ph\u1ee5c h\u1ed3i d\u1eef li\u1ec7u";var r=D.parse(n.props.location.search);return n.state={filterData:r,tenFileSave:"",filePhucHoi:void 0,tenFileUpload:"",fileUpload:"",loading:!1,filterByName:""},n}return(0,r.Z)(a,[{key:"componentDidMount",value:function(){this.props.getInitData(this.state.filterData)}},{key:"render",value:function(){var t=this,e=this.props,a=e.LichSuSaoLuu,n=e.TotalRow,i=e.role,r=this.props.DanhSachPhucHoi?this.props.DanhSachPhucHoi:[],o=this.state,l=o.filterData,c=o.loading,h=o.filePhucHoi,p=o.tenFileSave,T=l.PageNumber?parseInt(l.PageNumber):1,U=l.PageSize?parseInt(l.PageSize):(0,v.hL)(),Z=[{title:"STT",align:"center",width:"5%",render:function(t,e,a){return(0,Q.jsx)("span",{children:(T-1)*U+(a+1)})}},{title:"Th\u1eddi gian",dataIndex:"LogTime",align:"center",width:"30%",render:function(t){return(0,Q.jsx)("span",{children:I()(t).format("DD/MM/YYYY HH:mm:ss")})}},{title:"Thao t\xe1c",dataIndex:"LogInfo",width:"35%"},{title:"Ng\u01b0\u1eddi th\u1ef1c hi\u1ec7n",dataIndex:"TenCanBo",width:"30%"}];return(0,Q.jsxs)(u.Z,{children:[(0,Q.jsx)(d.Z,{children:"SAO L\u01afU, PH\u1ee4C H\u1ed2I D\u1eee LI\u1ec6U"}),(0,Q.jsx)(f.Z,{children:(0,Q.jsxs)(_.Z,{gutter:[16,16],children:[(0,Q.jsxs)(L.Z,{span:24,xl:12,children:[(0,Q.jsx)("b",{style:{fontSize:20},children:"Sao l\u01b0u"}),(0,Q.jsx)("br",{}),"T\xean file:",(0,Q.jsx)(S.Z,{style:{width:"50%",marginLeft:40,marginRight:20},value:p,onChange:function(e){return t.changeTenFile(e)},onKeyPress:function(e){return t.catChuoi(e)},allowClear:!0,maxLength:50,disabled:c,placeholder:"Nh\u1eadp t\xean file sao l\u01b0u",addonBefore:"NNCH_"}),(0,Q.jsxs)(E.Z,{type:"primary",style:{width:110},onClick:this.saoLuu,disabled:c&&i.view&&i.add&&i.delete&&i.edit,children:[(0,Q.jsx)(w,{})," Sao l\u01b0u"]})]}),(0,Q.jsxs)(L.Z,{span:24,xl:12,children:[(0,Q.jsx)("b",{style:{fontSize:20},children:"Ph\u1ee5c h\u1ed3i"}),(0,Q.jsx)("br",{}),"File sao l\u01b0u:",(0,Q.jsx)(P.Ph,{style:{width:"50%",marginLeft:13,marginRight:20},notFoundContent:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",placeholder:"Ch\u1ecdn file ph\u1ee5c h\u1ed3i",value:h,onChange:function(e){return t.changeFilePhucHoi(e)},allowClear:!0,disabled:c&&i.view&&i.add&&i.delete&&i.view,showSearch:!0,children:r.map((function(t){return(0,Q.jsx)(P.ZN,{value:t.TenFile,children:t.TenFile})}))}),(0,Q.jsxs)(E.Z,{style:{width:110},type:"primary",onClick:this.phucHoi,disabled:this.state.loading,children:[(0,Q.jsx)(H,{})," Ph\u1ee5c h\u1ed3i"]}),(0,Q.jsx)("br",{}),(0,Q.jsx)("br",{}),(0,Q.jsx)("b",{children:"Ch\xfa \xfd"}),": Qu\xe1 tr\xecnh kh\xf4i ph\u1ee5c d\u1eef li\u1ec7u c\xf3 th\u1ec3 k\xe9o d\xe0i. Trong qu\xe1 tr\xecnh n\xe0y, nh\u1eefng ng\u01b0\u1eddi d\xf9ng kh\xe1c kh\xf4ng th\u1ec3 truy c\u1eadp h\u1ec7 th\u1ed1ng."]})]})}),(0,Q.jsxs)(f.Z,{children:[(0,Q.jsx)("b",{style:{fontSize:20},children:"L\u1ecbch s\u1eed sao l\u01b0u"}),(0,Q.jsx)(g.Z,{children:(0,Q.jsx)(F,{placeholder:"Nh\u1eadp th\xf4ng tin c\u1ea7n t\xecm ki\u1ebfm",onSearch:function(e){return t.onSearch(e,"Keyword")},style:{width:300},value:this.state.filterByName,onChange:function(e){return t.changeFilterByName(e)}})}),(0,Q.jsx)(s.ZP,{columns:Z,dataSource:a,loading:this.props.TableLoading,onChange:this.onTableChange,pagination:{showSizeChanger:!0,showTotal:function(t,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(t)},total:n,current:T,pageSize:U}})]})]})}}]),a}(c.Component);var B=(0,h.$j)((function(t){return(0,n.Z)({},t.SaoLuuDuLieu)}),Z)(G)},30914:function(t,e,a){var n=a(89752);e.Z=n.Z},66106:function(t,e,a){var n=a(37545);e.Z=n.Z}}]);
//# sourceMappingURL=542.dd55ee6a.chunk.js.map