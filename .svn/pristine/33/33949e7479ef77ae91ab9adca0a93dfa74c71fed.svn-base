"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[377],{41145:function(n,e,t){t.d(e,{z:function(){return r}});var a=t(50678),i=t(72791);function r(n){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],o=t[1];return[r,function(){o(r+1)}]}},53377:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var a,i,r,o=t(18489),s=t(50678),c=t(77027),u=t(57652),h=t(71810),d=t(66106),l=t(30914),g=t(55432),p=t(72791),Z=t(47375),f=t(52591),m=t(35667),x=t(71285),P=t(7111),C=t(66914),I=t(36043),w=t(70297),D=t(55454),S=t(41145),b=t(4245),j=t(51782),v=(t(13936),t(72426),t(33032)),T=t(84322),y=t.n(T),B=t(65331),k=t(10916),M=(t(23357),t(66023)),Q=t(17186),E=t(63463),L=E.ZP.div(a||(a=(0,Q.Z)(["\n    .tree-custom {\n        padding: 0;\n        border: none;\n    }\n    .isoBoxWrapper {\n        border: none;\n        padding: 0;\n    }\n    .tree-custom div,\n    .isoLayoutContentWrapper,\n    .isoLayoutContentWrapper div {\n        padding: 0;\n    }\n\n    h1,\n    .d-none {\n        display: none;\n        padding: 0 !important;\n    }\n    .mg-top::-webkit-scrollbar {\n        background-color: #f5f5f5;\n    }\n\n    .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\n        width: 30% !important;\n    }\n    span.ant-input-group-wrapper.ant-input-search {\n        width: 65% !important;\n    }\n\n    span.ant-tree-title {\n        min-width: 450px;\n    }\n\n    .mg-top {\n        margin-top: 20px;\n        height: calc(100vh - 265px);\n        overflow: scroll;\n    }\n\n    @media (max-width: 767px) {\n        span.ant-tree-title {\n            width: 100%;\n        }\n        .isoBoxWrapper {\n            height: 300px !important;\n        }\n        .mg-top {\n            height: 300px !important;\n        }\n        .esmvo {\n            height: 300px;\n        }\n    }\n    @media (min-width: 768px) and (max-width: 852px) {\n        .ant-select.ant-select-single.ant-select-allow-clear.ant-select-show-arrow.ant-select-show-search {\n            width: 100% !important;\n        }\n        span.ant-input-group-wrapper.ant-input-search {\n            width: 100% !important;\n        }\n    }\n"]))),z=(E.ZP.div(i||(i=(0,Q.Z)(["\n    .ant-input-number-handler-wrap {\n        display: none;\n        width: 100%;\n    }\n    .ant-input-number.ant-input-number-in-form-item {\n        width: 100%;\n    }\n"]))),E.ZP.div(r||(r=(0,Q.Z)(["\n    height: 40px;\n    line-height: 40px;\n    font-weight: 500;\n    font-size: 17px;\n    margin: 5px 0;\n"])))),N=t(80184),R=k.Z.Item,U=k.Z.useForm,V=function(n){var e=U(),t=(0,s.Z)(e,1)[0],a=n.dataEdit,i=n.loading,r=n.visible,c=n.action,u=n.IDmodal,h=n.CoQuanDonVi,d=(0,p.useState)(!0),l=(0,s.Z)(d,2),g=l[0],Z=l[1],f=(0,p.useState)(),m=(0,s.Z)(f,2);m[0],m[1];(0,p.useEffect)((function(){console.log(a),a&&t&&t.setFieldsValue((0,o.Z)((0,o.Z)({},a),{},{CoQuanDonVi:h}))}),[]),t.setFieldsValue({CoQuanID:u});var x=function(){var e=(0,v.Z)(y().mark((function e(a){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t.validateFields();case 3:i=e.sent,n.onCreate(i);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),P=function(){var n=(0,v.Z)(y().mark((function n(e,i){var r,o,s,c;return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getFieldsValue();case 2:r=n.sent,o=r.SoDienThoai,s=r.TenPhongBan,c=r.GhiChu,!s||s===a.TenPhongBan&&c===a.GhiChu&&o===a.SoDienThoai?Z(!0):Z(!1);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,N.jsx)(w.u_,{title:"".concat("edit"===c?"S\u1eeda":"Th\xeam"," th\xf4ng tin ph\xf2ng ban"),width:450,visible:r,onCancel:n.onCancel,footer:[(0,N.jsx)(w.zx,{onClick:n.onCancel,children:"H\u1ee7y"},"back"),(0,N.jsx)(w.zx,{disabled:g,htmlType:"submit",type:"primary",form:"formmonhoc",loading:i,onClick:x,children:"L\u01b0u"},"submit")],children:(0,N.jsxs)(k.Z,{form:t,name:"formphongban",onChange:P,children:["edit"===c?(0,N.jsx)(R,{name:"PhongBanID",hidden:!0}):"","edit"===c?(0,N.jsx)(R,{name:"CoQuanID",hidden:!0}):(0,N.jsx)(R,(0,o.Z)((0,o.Z)({label:"C\u01a1 Quan ID",name:"CoQuanID"},B.ITEM_LAYOUT),{},{hidden:!0,children:(0,N.jsx)(w.II,{})})),(0,N.jsx)(R,(0,o.Z)((0,o.Z)({label:"C\u01a1 quan \u0111\u01a1n v\u1ecb",name:"CoQuanDonVi"},B.ITEM_LAYOUT),{},{required:[B.REQUIRED],children:(0,N.jsx)(w.II,{disabled:!0})})),(0,N.jsx)(R,(0,o.Z)((0,o.Z)({label:"T\xean ph\xf2ng ban",name:"TenPhongBan"},B.ITEM_LAYOUT),{},{required:[B.REQUIRED],children:(0,N.jsx)(w.II,{})})),(0,N.jsx)(R,(0,o.Z)((0,o.Z)({label:"\u0110i\u1ec7n tho\u1ea1i",name:"SoDienThoai"},B.ITEM_LAYOUT),{},{rules:[{max:11,message:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7.",pattern:new RegExp(/^[0-9]+$/)}],children:(0,N.jsx)(w.II,{maxLength:11})})),(0,N.jsx)(R,(0,o.Z)((0,o.Z)({label:"Ghi ch\xfa",name:"GhiChu"},B.ITEM_LAYOUT),{},{children:(0,N.jsx)(M.Z,{})}))]})})},A=t(31752),G=t(82622),O=t(79286),_=t(41643);var q=(0,Z.$j)((function(n){return(0,o.Z)((0,o.Z)({},n.DanhMucPhongBan),{},{role:(0,D.Ry)(n.Auth.role)})}),g.Z)((function(n){document.title="Danh M\u1ee5c Ph\xf2ng Ban";var e=(0,p.useState)(b.parse(n.location.search)),t=(0,s.Z)(e,2),a=t[0],i=t[1],r=(0,p.useState)({}),g=(0,s.Z)(r,2),v=g[0],T=g[1],y=(0,p.useState)(!1),B=(0,s.Z)(y,2),k=B[0],M=B[1],Q=(0,p.useState)(""),E=(0,s.Z)(Q,2),R=E[0],U=E[1],q=(0,S.z)(),F=(0,s.Z)(q,2),Y=F[0],W=F[1],X=(0,p.useState)([]),K=(0,s.Z)(X,2),$=(K[0],K[1]),H=(0,p.useState)(!1),J=(0,s.Z)(H,2),nn=J[0],en=J[1],tn=(0,p.useState)(""),an=(0,s.Z)(tn,2),rn=an[0],on=an[1],sn=(0,Z.v9)((function(n){return n.DMCoQuan.DanhSachCoQuan}));(0,p.useEffect)((function(){(0,D.ZZ)(a),n.getList(a)}),[a]),(0,p.useEffect)((function(){n.getList(a)}),[]);var cn=function n(e,t){e.forEach((function(e){e.Children?e.ID===t?on(e):n(e.Children,t):e.ID===t&&on(e)}))},un=function(n,e){var t=a,r={value:n,property:e},o=(0,D.mB)(t,r,null);i(o),$([]),cn(sn,n)};(0,p.useEffect)((function(){cn(sn,parseInt(a.CoQuanID))}),[sn]);var hn=function(){U(""),$([]),T({}),M(!1)},dn=function(e){return(0,N.jsxs)("div",{className:"action-btn",children:[(0,N.jsx)(h.Z,{title:"S\u1eeda",children:(0,N.jsx)(A.Z,{onClick:function(){return function(n){var e=n;U("edit"),j.Z.ChiTietPhongBan({PhongBanID:e}).then((function(n){n.data.Status>0?(T(n.data.Data),W(),M(!0)):(c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}(e.PhongBanID)}})}),(0,N.jsx)(h.Z,{title:"X\xf3a",children:(0,N.jsx)(G.Z,{onClick:function(){return t=e.PhongBanID,void u.Z.confirm({title:"X\xf3a D\u1eef Li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ph\xf2ng ban n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){en(!0),j.Z.XoaPhongBan(t).then((function(e){e.data.Status>0?(en(!1),n.getList((0,o.Z)((0,o.Z)({},a),{},{PageNumber:Math.ceil((gn-1)/a.PageSize)<a.PageNumber?Math.ceil((gn-1)/a.PageSize):a.PageNumber})),c.ZP.destroy(),c.ZP.success(e.data.Message),i((0,o.Z)((0,o.Z)({},a),{},{PageNumber:Math.ceil((gn-1)/a.PageSize)<a.PageNumber?Math.ceil((gn-1)/a.PageSize):a.PageNumber}))):(c.ZP.destroy(),c.ZP.error(e.data.Message))})).catch((function(n){c.ZP.destroy(),c.ZP.error(n.toString())}))}});var t}})})]})},ln=n.DanhSachPhongBan,gn=n.TotalRow,pn=(n.role,a.PageNumber?parseInt(a.PageNumber):1),Zn=a.PageSize?parseInt(a.PageSize):(0,D.hL)(),fn=[{title:"STT",width:"5%",align:"center",render:function(n,e,t){return(0,N.jsx)("span",{children:(pn-1)*Zn+(t+1)})}},{title:"T\xean Ph\xf2ng Ban",dataIndex:"TenPhongBan",align:"left",width:30},{title:"S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i",dataIndex:"SoDienThoai",align:"left",width:15},{title:"Ghi Ch\xfa",dataIndex:"GhiChu",align:"left",width:30},{title:"Thao t\xe1c",width:"15%",align:"center",render:function(n,e){return dn(e)}}];return(0,N.jsxs)(f.Z,{children:[(0,N.jsx)(m.Z,{children:"Danh M\u1ee5c Ph\xf2ng Ban"}),(0,N.jsx)(x.Z,{children:(0,N.jsxs)(w.zx,{type:"primary",onClick:function(){a.CoQuanID?(U("add"),T({props:n}),W(),M(!0)):c.ZP.error("Ch\u01b0a ch\u1ecdn c\u01a1 quan \u0111\u01a1n v\u1ecb.")},disabled:!a.CoQuanID,children:[(0,N.jsx)(O.Z,{}),"Th\xeam m\u1edbi"]})}),(0,N.jsx)(P.Z,{children:(0,N.jsxs)(d.Z,{gutter:[40,0],children:[(0,N.jsxs)(l.Z,{xl:7,md:7,xs:24,children:[(0,N.jsx)(C.Z,{}),(0,N.jsx)(L,{children:(0,N.jsx)(_.default,(0,o.Z)((0,o.Z)({dispatch:function(n){un(n,"CoQuanID")}},n),{},{styled:parseInt(a.CoQuanID)}))})]}),(0,N.jsxs)(l.Z,{xl:17,md:17,xs:24,children:[(0,N.jsxs)(z,{children:[" ",rn.Ten?"Danh s\xe1ch c\xe1c ph\xf2ng ban thu\u1ed9c ".concat(rn.Ten):""]}),(0,N.jsx)(I.ZP,{columns:fn,dataSource:ln,onChange:function(n,e,t){var r=a,o={pagination:n,filters:e,sorter:t},s=(0,D.mB)(r,null,o);i(s),$([])},pagination:{showSizeChanger:!0,showTotal:function(n,e){return"T\u1eeb ".concat(e[0]," \u0111\u1ebfn ").concat(e[1]," tr\xean ").concat(n," k\u1ebft qu\u1ea3")},total:gn,current:pn,pageSize:Zn},rowKey:function(n){return n.PhongBanID}})]})]})}),(0,N.jsx)(V,{visible:k,dataEdit:v,action:R,loading:nn,onCreate:function(e){en(!0),"add"===R&&j.Z.ThemPhongBan(e).then((function(n){en(!1),n.data.Status>0?(c.ZP.destroy(),c.ZP.success(n.data.Message),un(a.CoQuanID,"CoQuanID"),hn()):(en(!1),c.ZP.destroy(),c.ZP.error(n.data.Message))})).catch((function(n){en(!1),c.ZP.destroy(),c.ZP.error(n.toString())})),"edit"===R&&j.Z.CapNhatPhongBan(e).then((function(e){e.data.Status>0?(en(!1),c.ZP.destroy(),c.ZP.success(e.data.Message),hn(),n.getList(a)):(en(!1),c.ZP.destroy(),c.ZP.error(e.data.Message))})).catch((function(n){en(!1),c.ZP.destroy(),c.ZP.error(n.toString())}))},onCancel:hn,DanhSachPhongBan:ln,IDmodal:a.CoQuanID,CoQuanDonVi:rn.Ten},Y)]})}))}}]);
//# sourceMappingURL=377.08350dfa.chunk.js.map