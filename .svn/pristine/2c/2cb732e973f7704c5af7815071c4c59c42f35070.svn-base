"use strict";(self.webpackChunkkkts=self.webpackChunkkkts||[]).push([[565,286],{71285:function(e,t,n){n.d(t,{Z:function(){return l}});n(72791);var a,i=n(17186),o=n(63463),r=n(17192),d=o.ZP.div(a||(a=(0,i.Z)(["\n    text-align: right;\n    display: inline-block;\n    flex: 1;\n    padding: 0 3px 0 0;\n    @media only screen and (max-width: 1336px) {\n        text-align: left;\n        display: block;\n        flex: none;\n        width: 100%;\n        padding: 0 0 10px 0;\n    }\n    button {\n        margin-right: 0px;\n        margin-left: 10px;\n        @media only screen and (max-width: 1336px) {\n            margin-left: 0px;\n            margin-right: 10px;\n        }\n    }\n"]))),s=(0,r.Z)(d),c=n(80184),l=function(e){return(0,c.jsx)(s,{children:e.children})}},83565:function(e,t,n){n.r(t),n.d(t,{default:function(){return se}});var a=n(36222),i=n(31303),o=n(18489),r=n(27853),d=n(84531),s=n(78932),c=n(66621),l=n(72791),u=n(47375),h=n(4245),f=n(94711),p=n(37782),m=n(65331),Z=n.n(m),g=n(88428),x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},v=n(54963),T=function(e,t){return l.createElement(v.Z,(0,g.Z)((0,g.Z)({},e),{},{ref:t,icon:x}))};T.displayName="StopOutlined";var L,C,S,y=l.forwardRef(T),D=n(31549),M=n(2487),K=n(67575),j=n(11532),E=n(79286),k=n(52591),w=n(35667),I=n(71285),b=n(7111),A=n(66914),P=n(36043),R=n(33032),N=n(50678),z=n(84322),O=n.n(z),Q=n(64422),H=n(10916),V=n(70297),_=(n(23357),n(80184)),q=H.Z.Item,U=H.Z.useForm,F=function(e){var t=U(),n=(0,N.Z)(t,1)[0],a=e.dataModalAdd,i=e.loading,r=e.visible,d=e.action,s=e.DanhSachCoQuan,c=(0,l.useState)(),u=(0,N.Z)(c,2),h=u[0],f=u[1],p=(0,l.useState)(!0),Z=(0,N.Z)(p,2),g=Z[0],x=Z[1];(0,l.useEffect)((function(){if("add"===d&&a&&a.LoaiKhieuToCha&&n&&n.setFieldsValue((0,o.Z)((0,o.Z)({},a),{},{TenLoaiKhieuToCha:a.Ten})),"edit"===d&&a){var e,t=null===a||void 0===a?void 0:a.LoaiKhieuToCha;!function t(n,a){n.forEach((function(n){n.DanhMucLoaiKhieuToCon?n.LoaiKhieuToID===a?e=n.TenLoaiKhieuTo:t(n.DanhMucLoaiKhieuToCon,a):n.LoaiKhieuToID===a&&(e=n.TenLoaiKhieuTo)}))}(s,t),n&&n.setFieldsValue((0,o.Z)((0,o.Z)({},a),{},{TenLoaiKhieuToCha:e||"Lo\u1ea1i khi\u1ebfu t\u1ed1 cha"}))}}),[]);var v=function(){var t=(0,R.Z)(O().mark((function t(i){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validateFields();case 2:r=t.sent,"add"==d&&(i.preventDefault(),e.onCreate((0,o.Z)((0,o.Z)({},r),{},{SuDung:void 0===h||h}))),"edit"===d&&(i.preventDefault(),console.log("okok"),e.onCreate((0,o.Z)((0,o.Z)((0,o.Z)({},a),r),{},{SuDung:r.SuDung})));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=(0,R.Z)(O().mark((function e(t,i){var o,r,s,c,l;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getFieldsValue();case 2:o=e.sent,r=o.MappingCode,s=o.TenLoaiKhieuTo,c=o.SuDung,l=o.ThuTu,"edit"===d&&(r&&parseInt(l)&&s&&(r!==a.MappingCode||s!==a.TenLoaiKhieuTo||c!==a.SuDung||parseInt(l)!==parseInt(a.ThuTu))?x(!1):x(!0)),"add"===d&&(r&&s&&(r!==a.MappingCode||s!==a.TenLoaiKhieuTo)?x(!!(l&&l<=0)):x(!0));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,_.jsx)(V.u_,{title:"".concat("edit"===d?"S\u1eeda":"Th\xeam"," lo\u1ea1i khi\u1ebfu t\u1ed1"),width:450,visible:r,onCancel:e.onCancel,style:{color:"red"},footer:[(0,_.jsx)(V.zx,{onClick:e.onCancel,children:"H\u1ee7y"},"back"),(0,_.jsx)(V.zx,{disabled:g,htmlType:"submit",type:"primary",form:"formbuocxacminh",loading:i,onClick:v,children:"L\u01b0u"},"submit")],children:(0,_.jsxs)(H.Z,{form:n,name:"formbuocxacminh",onChange:T,children:[(0,_.jsx)(q,(0,o.Z)((0,o.Z)({label:"Lo\u1ea1i khi\u1ebfu t\u1ed1 cha",name:"TenLoaiKhieuToCha"},m.ITEM_LAYOUT),{},{children:(0,_.jsx)(V.II,{disabled:!0})})),(0,_.jsx)(q,(0,o.Z)((0,o.Z)({label:"M\xe3 lo\u1ea1i khi\u1ebfu t\u1ed1",name:"MappingCode"},m.ITEM_LAYOUT),{},{rules:[m.REQUIRED],children:(0,_.jsx)(V.PQ,{})})),(0,_.jsx)(q,(0,o.Z)((0,o.Z)({label:"T\xean lo\u1ea1i khi\u1ebfu t\u1ed1",name:"TenLoaiKhieuTo"},m.ITEM_LAYOUT),{},{rules:[m.REQUIRED],children:(0,_.jsx)(V.II,{})})),(0,_.jsx)(q,(0,o.Z)((0,o.Z)({label:"Th\u1ee9 t\u1ef1 s\u1eafp x\u1ebfp",name:"ThuTu"},m.ITEM_LAYOUT),{},{rules:[{max:11,message:"S\u1ed1 th\u1ee9 t\u1ef1 kh\xf4ng h\u1ee3p l\u1ec7.",pattern:new RegExp(/^[1-900000000]+$/)}],children:(0,_.jsx)(V.II,{maxLength:7})})),"add"===d?(0,_.jsx)(_.Fragment,{}):(0,_.jsx)(q,(0,o.Z)((0,o.Z)({label:"S\u1eed d\u1ee5ng",name:"SuDung"},m.ITEM_LAYOUT),{},{children:(0,_.jsxs)(Q.ZP.Group,{onChange:function(e){f(e.target.value)},value:h,defaultValue:!0,children:[(0,_.jsx)(Q.ZP,{value:!0,children:"C\xf3"}),(0,_.jsx)(Q.ZP,{value:!1,children:"Kh\xf4ng"})]})}))]})})},B=n(66883),Y=n(57652),X=n(77027),$=n(83388),G=n(10294),J=n(49389),W=n(28532),ee=n(55454),te=n(17186),ne=n(63463),ae=ne.ZP.div(L||(L=(0,te.Z)(["\n    .ant-tree .ant-tree-treenode:not(.ant-tree .ant-tree-treenode-disabled).filter-node .ant-tree-title {\n        color: red;\n    }\n    span.ant-tree-iconEle.ant-tree-icon__customize {\n        display: none !important;\n    }\n"]))),ie=ne.ZP.span(C||(C=(0,te.Z)(["\n    svg {\n        margin-right: 10px;\n    }\n    .delete {\n        color: red;\n    }\n    .add {\n        color: green;\n        font-weight: 800;\n    }\n    .stop {\n        color: red;\n    }\n    .check {\n        color: green;\n    }\n"]))),oe=ne.ZP.div(S||(S=(0,te.Z)(["\n    margin-top: 20px;\n    height: calc(100vh - 265px);\n    overflow-y: scroll;\n"]))),re=B.Z.TreeNode,de=function(e){(0,s.Z)(n,e);var t=(0,c.Z)(n);function n(e){var d;(0,r.Z)(this,n),(d=t.call(this,e)).componentDidMount=function(){d.props.getInitData(d.state.filterData)},d.onFilter=function(e,t){var n=(0,o.Z)({},d.state.filterData),a={value:e,property:t},i=(0,ee.mB)(n,a,null);d.setState({filterData:i},(function(){var e=d.state.filterData.Keyword?d.state.filterData.Keyword:"";(0,ee.ZZ)({Keyword:e}),d.props.getList(d.state.filterData)}))},d.deleteData=function(e){Y.Z.confirm({title:"X\xf3a d\u1eef li\u1ec7u",content:"B\u1ea1n c\xf3 mu\u1ed1n x\xf3a c\u01a1 quan \u0111\u01a1n v\u1ecb n\xe0y kh\xf4ng?",cancelText:"Kh\xf4ng",okText:"C\xf3",onOk:function(){p.Z.xoaCoQuan(e).then((function(e){e.data.Status>0?(X.ZP.destroy(),X.ZP.success("X\xf3a th\xe0nh c\xf4ng"),d.props.getList(d.state.filterData)):Y.Z.error({title:"L\u1ed7i",content:e.data.Message})})).catch((function(e){Y.Z.error(Z().API_ERROR)}))}})},d.submitModalAddEdit=function(e){d.setState({confirmLoading:!0}),"add"===d.state.action&&p.Z.themCoQuan((0,o.Z)((0,o.Z)((0,o.Z)({},d.state.dataModalAddEdit),e),{},{ThuTu:e.ThuTu||d.state.DanhSachCoQuan.length+1})).then((function(e){d.setState({confirmLoading:!0}),e.data.Status>0?(X.ZP.destroy(),X.ZP.success(e.data.Message),d.hideModalAddEdit(),d.props.getInitData(d.state.filterData)):(d.setState({setConfirmLoading:!1}),X.ZP.destroy(),X.ZP.error(e.data.Message))})).catch((function(e){d.setState({setConfirmLoading:!1}),X.ZP.destroy(),X.ZP.error(e.toString())})),"edit"===d.state.action&&d.setState({confirmLoading:!0},(function(){p.Z.suaCoQuan(e).then((function(e){e.data.Status>0?(X.ZP.destroy(),X.ZP.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),d.hideModalAddEdit(),d.props.getList(d.state.filterData)):(d.setState({confirmLoading:!1}),Y.Z.error({title:"L\u1ed7i",content:e.data.Message}))})).catch((function(e){Y.Z.error(Z().API_ERROR)}))}))},d.showModalEdit=function(e){d.setState({action:"edit"}),p.Z.chiTietCoQuan({LoaiKhieuToID:e}).then((function(e){if(e.data.Status>0){var t=d.state.modalKey+1,n=e.data.Data;d.setState({visibleModalAddEdit:!0,dataModalAddEdit:(0,o.Z)({},n),confirmLoading:!1,modalKey:t})}else Y.Z.error({title:"L\u1ed7i",content:e.data.Message})})).catch((function(e){Y.Z.error(Z().API_ERROR)}))},d.showModalAdd=function(e,t,n,a){var i=d.state.modalKey+1;d.setState({action:"add",visibleModalAddEdit:!0,dataModalAddEdit:{LoaiKhieuToCha:e,Cap:t+1,Ten:n},confirmLoading:!1,modalKey:i})},d.showModalAddbtn=function(){var e=d.state.modalKey+1;d.setState({action:"add",visibleModalAddEdit:!0,dataModalAddEdit:{LoaiKhieuToCha:-1,Cap:0},confirmLoading:!1,modalKey:e})},d.setStatusItem=function(e,t){p.Z.setSuDung({LoaiKhieuToID:e,SuDung:t}).then((function(e){e.data.Status>0?(X.ZP.destroy(),X.ZP.success("C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"),d.props.getList(d.state.filterData)):Y.Z.error({title:"L\u1ed7i",content:e.data.Message})})).catch((function(e){Y.Z.error(Z().API_ERROR)}))},d.hideModalAddEdit=function(){d.setState({dataModalAddEdit:{},visibleModalAddEdit:!1})},d.onExpandNode=function(e,t){var n=t.nativeEvent.target.outerHTML.toString(),a=t.nativeEvent.target.parentElement.className.toString(),o=n.includes("ant-dropdown-menu"),r=a.includes("ant-dropdown-menu");if(!o&&!r){var s=t.node.props.eventKey.toString();if(s&&!t.node.props.isLeaf){var c=(0,i.Z)(d.state.expandedKeys),l=c.indexOf(s);l>-1?c.splice(l,1):c=d.state.expandedKeys.concat([s]),d.setState({expandedKeys:c}),d.setState({openTree:e})}}},d.renderTreeNodes=function(e){return e.map((function(e){var t=(0,_.jsxs)($.Z,{children:[(0,_.jsx)($.Z.Item,{disabled:!1===e.SuDung,onClick:function(){return d.showModalAdd(e.LoaiKhieuToID,e.Cap,e.TenLoaiKhieuTo)},children:(0,_.jsxs)(ie,{children:[(0,_.jsx)(D.Z,{className:"add"})," Th\xeam m\u1edbi"]})}),(0,_.jsx)($.Z.Item,{onClick:function(){return d.showModalEdit(e.LoaiKhieuToID)},children:(0,_.jsxs)(ie,{children:[(0,_.jsx)(M.Z,{className:"edit"})," S\u1eeda"]})}),(0,_.jsx)($.Z.Item,{onClick:function(){return d.setStatusItem(e.LoaiKhieuToID,!e.SuDung)},children:e.SuDung?(0,_.jsxs)(ie,{children:[(0,_.jsx)(y,{className:"stop"})," Kh\xf4ng s\u1eed d\u1ee5ng"]}):(0,_.jsxs)(ie,{children:[(0,_.jsx)(K.Z,{className:"check"})," S\u1eed d\u1ee5ng"]})}),(0,_.jsx)($.Z.Item,{disabled:!!e.DanhMucLoaiKhieuToCon.length,onClick:function(){return d.deleteData(e.LoaiKhieuToID)},children:(0,_.jsxs)(ie,{children:[(0,_.jsx)(j.Z,{className:"delete"})," X\xf3a"]})})]}),n=(0,_.jsx)("div",{children:(0,_.jsx)(G.Z,{overlay:t,placement:"bottomLeft",trigger:["contextMenu"],children:(0,_.jsx)("span",{style:!1===e.SuDung?{textDecoration:"line-through"}:{},children:e.TenLoaiKhieuTo})})});return e.children?(0,_.jsx)(re,(0,a.Z)({title:n,isLeaf:e.isLeaf,children:e.children,dataRef:e},"children",d.renderTreeNodes(e.children)),e.key):(0,_.jsx)(re,{title:n,isLeaf:e.isLeaf,children:e.children,dataRef:e},e.key)}))},d.renderContent=function(){if(d.state.DanhSachCoQuan.length){var e=d.filterTreeNode(d.props.DanhSachCoQuan);return(0,_.jsx)(ae,{children:(0,_.jsx)(B.Z,{showLine:!0,filterTreeNode:function(e){return 1===e.props.dataRef.Highlight},onSelect:d.onExpandNode,onExpand:d.onExpandNode,defaultExpandedKeys:d.state.openTree,expandedKeys:d.state.filterData.Keyword?d.props.expandedKeys:d.state.expandedKeys,children:d.renderTreeNodes(e)})})}return(0,_.jsx)(P.o1,{loading:d.props.TableLoading})},d.filterTreeNode=function(e){return e},d.renderActionAddEdit=function(){return(0,_.jsxs)("span",{children:[(0,_.jsxs)(W.Z,{type:"primary",onClick:function(){return d.showModalAdd(-1,-1,"Lo\u1ea1i khi\u1ebfu t\u1ed1 cha")},children:[(0,_.jsx)(E.Z,{}),"Th\xeam m\u1edbi"]}),(0,_.jsx)(F,{confirmLoading:d.state.confirmLoading,visible:d.state.visibleModalAddEdit,onCancel:d.hideModalAddEdit,onCreate:d.submitModalAddEdit,dataModalAdd:d.state.dataModalAddEdit,action:d.state.action,DanhSachCoQuan:d.state.DanhSachCoQuan},d.state.modalKey)]})},document.title="Danh M\u1ee5c Lo\u1ea1i Khi\u1ebfu T\u1ed1";var s=h.parse(d.props.location.search);return d.state={action:"",visibleModalAddEdit:!1,dataModalAddEdit:{},expandedKeys:[],filterData:(0,o.Z)({},s),treeKey:0,modalKey:0,DanhSachCoQuan:[],confirmLoading:!1,openTree:[]},d}return(0,d.Z)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.DanhSachCoQuan!==this.props.DanhSachCoQuan){var a=this.state.treeKey+1;this.setState({DanhSachCoQuan:this.props.DanhSachCoQuan,treeKey:a})}}},{key:"render",value:function(){var e=this;JSON.parse(localStorage.getItem("user")).VaiTro;return(0,_.jsxs)(k.Z,{children:[(0,_.jsx)(w.Z,{children:"DANH M\u1ee4C LO\u1ea0I KHI\u1ebeU T\u1ed0"}),(0,_.jsx)(I.Z,{children:this.renderActionAddEdit()}),(0,_.jsxs)(b.Z,{style:{minHeight:"calc(100vh - 265px)"},children:[(0,_.jsx)(A.Z,{children:(0,_.jsx)(J.Z.Search,{allowClear:!0,defaultValue:this.state.filterData.Keyword,placeholder:"T\xecm ki\u1ebfm theo t\xean lo\u1ea1i khi\u1ebfu t\u1ed1",onSearch:function(t){return e.onFilter(t,"Keyword")},style:{width:300}})}),(0,_.jsx)(oe,{style:{userSelect:"none"},children:this.renderContent()},this.state.treeKey)]})]})}}]),n}(l.Component);var se=(0,u.$j)((function(e){return(0,o.Z)({},e.DanhMucLoaiKhieuTo)}),f.Z)(de)},11532:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(88428),i=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},r=n(54963),d=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};d.displayName="CloseCircleOutlined";var s=i.forwardRef(d)},2487:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(88428),i=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-792 72h752v120H136V232zm752 560H136V440h752v352zm-237-64h165c4.4 0 8-3.6 8-8v-72c0-4.4-3.6-8-8-8H651c-4.4 0-8 3.6-8 8v72c0 4.4 3.6 8 8 8z"}}]},name:"credit-card",theme:"outlined"},r=n(54963),d=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};d.displayName="CreditCardOutlined";var s=i.forwardRef(d)},31549:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(88428),i=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"},r=n(54963),d=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};d.displayName="PlusCircleOutlined";var s=i.forwardRef(d)},79286:function(e,t,n){n.d(t,{Z:function(){return s}});var a=n(88428),i=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},r=n(54963),d=function(e,t){return i.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};d.displayName="PlusOutlined";var s=i.forwardRef(d)}}]);
//# sourceMappingURL=565.a0cab6a0.chunk.js.map